{{ define "main" }}

<section>
    <div class="product">
        {{ .Content }}
    <div class="description">
        <h3>Membership</h3>
        <h5>300DKK.00</h5>
    </div>
    </div>
    {{ with .Site.Params.backend }}
        <form name="myform" action="http://{{.url}}:{{.port}}/create-checkout-session" method="POST">
            <div class="form-group">
                <label for="name"><i class="fa fa-user fa-fw"></i></label>
                <input type="text" name="name" required placeholder="Please enter your name">
            </div>
            <div class="form-group">
                <label for="email"><i class="fa fa-envelope fa-fw"></i></label>
                <input type="email" name="email" required placeholder="Your email (used for billing and authentication)">
            </div>
            <div class="form-group">
                <label for="phone"><i class="fa fa-phone fa-fw"></i></label>
                <input type="phone" name="phone" placeholder="Your phone number (optional)">
            </div>
            <div class="form-group">
                <label for="pass"><i class="fa fa-lock fa-fw"></i></label>
                <input type="password" name="pass" required placeholder="Password">
            </div>
            <div class="form-group">
                <label for="repeat_password"><i class="fa fa-lock fa-fw"></i></label>
                <input type="password" name="re_pass" required placeholder="Repeat your password">
            </div>
            <div class="form-group">
                <input type="checkbox" name="agree-term1" required>
                <label for="agree-term" class="label-agree-term">I read <a href="https://drive.google.com/file/d/1dE5X27IeZYMPg7fpnYREqrXaAmssD8wE/view" class="term-service">Privacy and Cookie policy of theotowngarage.com website</a></label>
            </div>
            <div class="form-group">
                <input type="checkbox" name="agree-term2" required>
                <label for="agree-term2" class="label-agree-term">I agree with all statements in <a href="https://drive.google.com/file/d/1T3F5X2FsVokXx8ktt1WxeB9o0LewlkAt/view" class="term-service">Terms of membership</a></label>
            </div>
            <div class="form-group">
                <input type="checkbox" name="agree-term3"  required>
                <label for="agree-term3" class="label-agree-term">I agree and sign up to the <a href="https://drive.google.com/file/d/1aVGgF4rSlQ5bLlj5R-N00uTYoIt9U2sY/view" class="term-service">Liability Waiver</a></label>
            </div>      
            <div class="form-group">
                <input type="checkbox" name="agree-term4" required>
                <label for="agree-term4" class="label-agree-term">I agree with <a href="https://drive.google.com/file/d/129pH4RxzWA9qoe4Tdyf4O2pspok1lDIh/view" class="term-service">Credit System terms</a></label>
            </div>

            <button type="submit" onclick="validate(event);">Checkout</button>
        </form>
    {{ end }}
</section>

<script>
    function validate(event) {
        var x= document.getElementsByName("pass")[0];
        var y= document.getElementsByName("re_pass")[0];
        if(x.value.length < 8 || x.value.length > 31) {
            // 72 bytes is the max for bcrypt. With unicode, let's just reduce that number to a reasonable number
            alert("The password must be between 8 and 31 characters");
            event.preventDefault();
            return;
        }
        if(x.value != y.value) {
            alert("The password fields do not match");
            // prevent the form being submitted
            event.preventDefault();
            return;
        }
    }
</script>

{{ end }}